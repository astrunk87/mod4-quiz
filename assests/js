var timeEl = document.querySelector(".time");
var mainEl = document.querySelector("#main");
var pointsEl = document.querySelector(".points");
var startGame = document.querySelector("#start");
var scoreEl = document.querySelector("#score");
var answerBox = document.querySelector("#answerBox");
// change to querySelector
var player = document.getElementById("msg");
var saveButton = document.getElementById("save");
var finalScore = document.getElementById("scoreSpot");
let currentQuestionNum = 0;
const questionEl = document.querySelector("#question");
const answersEl = document.querySelector("#answers");

var startingScore = 0;
var secondsLeft = 60;

// with help from prof



const questions = [
    {
    question: "what anwer is a web api?",
    answers: ["Java Script", "CSS", "Bootstrap",  "HTML"],
    correctAnswer: 2
},
{
    question: "what does css stand for?",
    answers: ["creative sheet standard", "casscading standard style", "casscading style sheet", "color style sheet"],
    correctAnswer: 2
},
{
    question: "what does js stand for?",
    answers: [ "joint styles", "james script","Java Script", "jelly scone"],
    correctAnswer: 2
}
];




function initQuestions() {
    const currentQuestion = questions[currentQuestionNum];
    questionEl.textContent = currentQuestion.question;
    answersEl.innerHTML = "";
    for (var i=0; i < currentQuestion.answers.length; i++) { 
        var li = document.createElement("li");
        li.textContent = currentQuestion.answers[i];
        answersEl.appendChild(li);
    }
}




startGame.addEventListener("click", initQuestions);
startGame.addEventListener("click", timer);
  

function timer () {
    var timerInterval = setInterval(function(){
        secondsLeft--;
        timeEl.textContent = secondsLeft + " tell game over";
                

        if(secondsLeft <= 0) {
            clearInterval(timerInterval);            
            sendMessage();
        }
    }, 1000)};

function handleAnswerQuestion(evt) {
    const currentQuestion = questions[currentQuestionNum];
    const correctAnswer = currentQuestion.correctAnswer;
    var target = evt.target;
    var idx = target.getAttribute("data-idx");
    if (idx == correctAnswer) {
        answerBox.textContent = ("correct!! + 5 points!!");
        addPoints()
    } else {
        loseTime()
        answerBox.textContent = "wrong -5 seconds";
    }
    currentQuestionNum++;
    if (currentQuestionNum >= questions.length) {
        endGame();
    } else {
        initQuestions();
    }
}
function addEventListeners() {
    answersEl.addEventListener("click", handleAnswerQuestion);
}
   

    function endGame(){
        if (secondsLeft > 0)
        // clearInterval(timerInterval);
        secondsLeft = 0;
        // showHighscore();
        sendMessage();    

    } 


    function saveLastScore() {
        var score = {
            finalScore: finalScore.value,
            player: player.value,
        };
        localStorage.setItem('score',JSON.stringify(score));
    }
    function showLastScore () {
        var lastScore = JSON.parse(localStorage.getItem('score'));
        if (lastScore !== null) {
            document.getElementById('finalScore').innerHTML = lastScore.finalScore;
            document.getElementById('player').innerHTML = lastScore.player;
        }
    }
   
    saveButton.addEventListener('click', function (event) {
        event.preventDefault();
        saveLastScore();
        showLastScore();
      });

    function addPoints() {
        startingScore = startingScore +5;
        scoreEl.textContent = startingScore;       
        // scoreEl.textContent = startingScore++;
        // scoreEl.textContent = startingScore++;
        // scoreEl.textContent = startingScore++;
        // scoreEl.textContent = startingScore++;     
    }
   

    function loseTime(){
        console.log("test");
        secondsLeft--;        
        secondsLeft--;
        secondsLeft--;
        secondsLeft--;
        secondsLeft--;
        }

function sendMessage() {
    timeEl.textContent = "GAME OVER"
}
 function init() {
        showLastScore();
        addEventListeners();
        
      }
      init();


